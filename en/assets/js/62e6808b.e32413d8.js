"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7608],{3931:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"backend/endpoints","title":"Endpoints e Estrutura de Resposta","description":"Esta se\xe7\xe3o detalha os endpoints REST expostos pelo backend da aplica\xe7\xe3o de g\xeameo digital. Todos os endpoints respondem em JSON com dados geogr\xe1ficos e contextuais simplificados para serem consumidos pelo front-end.","source":"@site/docs/backend/endpoints.md","sourceDirName":"backend","slug":"/backend/endpoints","permalink":"/gemeo-digital/en/docs/backend/endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/niteroi-prefeitura/gemeo-digital/tree/master/apps/docs/docs/backend/endpoints.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"endpoints","title":"Endpoints e Estrutura de Resposta","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Logs","permalink":"/gemeo-digital/en/docs/backend/logs"},"next":{"title":"Fluxo da Aplica\xe7\xe3o","permalink":"/gemeo-digital/en/docs/backend/fluxo-da-aplicacao"}}');var d=n(4848),i=n(8453);const a={id:"endpoints",title:"Endpoints e Estrutura de Resposta",sidebar_position:4},o="Endpoints da API",r={},l=[{value:"Considera\xe7\xf5es T\xe9cnicas",id:"considera\xe7\xf5es-t\xe9cnicas",level:2},{value:"Pr\xf3ximos Passos",id:"pr\xf3ximos-passos",level:2},{value:"Resumo dos Endpoints",id:"resumo-dos-endpoints",level:2},{value:"<code>/api/bus</code>",id:"apibus",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:3},{value:"Fonte dos dados",id:"fonte-dos-dados",level:3},{value:"Cache",id:"cache",level:3},{value:"Estrutura de Resposta",id:"estrutura-de-resposta",level:3},{value:"<code>/api/alerts</code>",id:"apialerts",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:3},{value:"Fonte dos dados",id:"fonte-dos-dados-1",level:3},{value:"Cache",id:"cache-1",level:3},{value:"Estrutura de Resposta",id:"estrutura-de-resposta-1",level:3},{value:"<code>/api/traffic</code>",id:"apitraffic",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:3},{value:"Fonte dos dados",id:"fonte-dos-dados-2",level:3},{value:"Cache",id:"cache-2",level:3},{value:"Estrutura de Resposta",id:"estrutura-de-resposta-2",level:3}];function c(t){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...t.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"endpoints-da-api",children:"Endpoints da API"})}),"\n",(0,d.jsxs)(e.p,{children:["Esta se\xe7\xe3o detalha os endpoints REST expostos pelo backend da aplica\xe7\xe3o de g\xeameo digital. Todos os endpoints respondem em ",(0,d.jsx)(e.strong,{children:"JSON"})," com dados geogr\xe1ficos e contextuais simplificados para serem consumidos pelo front-end."]}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"considera\xe7\xf5es-t\xe9cnicas",children:"Considera\xe7\xf5es T\xe9cnicas"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"Todos os endpoints suportam cache interno, controlado por tempo de expira\xe7\xe3o."}),"\n",(0,d.jsx)(e.li,{children:"Os dados s\xe3o tratados para remover atributos desnecess\xe1rios antes de serem enviados ao front."}),"\n",(0,d.jsx)(e.li,{children:"O middleware de erro registra falhas com Winston, permitindo auditoria e manuten\xe7\xe3o."}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"pr\xf3ximos-passos",children:"Pr\xf3ximos Passos"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"Incluir filtragem geogr\xe1fica."}),"\n",(0,d.jsx)(e.li,{children:"Retornar metadados como para controle de integridade dos dados."}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"resumo-dos-endpoints",children:"Resumo dos Endpoints"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"Endpoint"}),(0,d.jsx)(e.th,{children:"Descri\xe7\xe3o"}),(0,d.jsx)(e.th,{children:"Origem dos Dados"}),(0,d.jsx)(e.th,{children:"Cache"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"/api/bus"})}),(0,d.jsx)(e.td,{children:"Dados de localiza\xe7\xe3o e status de \xf4nibus"}),(0,d.jsx)(e.td,{children:"API externa"}),(0,d.jsx)(e.td,{children:"30 segundos"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"/api/alerts"})}),(0,d.jsx)(e.td,{children:"Alertas de tr\xe2nsito"}),(0,d.jsx)(e.td,{children:"Camada ArcGIS pr\xf3pria"}),(0,d.jsx)(e.td,{children:"2 minutos"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"/api/traffic"})}),(0,d.jsx)(e.td,{children:"Fluxo de tr\xe2nsito por segmento vi\xe1rio"}),(0,d.jsx)(e.td,{children:"Camada ArcGIS pr\xf3pria"}),(0,d.jsx)(e.td,{children:"5 minutos"})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"apibus",children:(0,d.jsx)(e.code,{children:"/api/bus"})}),"\n",(0,d.jsx)(e.h3,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,d.jsx)(e.p,{children:"Retorna a localiza\xe7\xe3o atual e informa\xe7\xf5es sobre a linha dos \xf4nibus monitorados na cidade."}),"\n",(0,d.jsx)(e.h3,{id:"fonte-dos-dados",children:"Fonte dos dados"}),"\n",(0,d.jsx)(e.p,{children:"API externa p\xfablica fornecida pela MobNit."}),"\n",(0,d.jsx)(e.h3,{id:"cache",children:"Cache"}),"\n",(0,d.jsx)(e.p,{children:"30 segundos"}),"\n",(0,d.jsx)(e.h3,{id:"estrutura-de-resposta",children:"Estrutura de Resposta"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'[\n\t\t{\n\t\t"id": "1209015_U_50_0",\n\t\t"routeId": "32587",\n\t\t"currentLocation": {\n\t\t\t"latitude": -22.89092254638672,\n\t\t\t"longitude": -43.125179290771484,\n\t\t\t"angle": 280.3048400878906,\n\t\t\t"timestamp": "2025-05-12T19:10:11.596Z"\n\t\t},\n\t\t"destination": "ida",\n\t\t"busInfo": {\n\t\t\t"consortium": "transnit",\n\t\t\t"busLine": "30",\n\t\t\t"busLineName": "martins torres",\n\t\t\t"headsign": "terminal",\n\t\t\t"shapeId": "75279_I"\n\t\t}\n\t},\n]\n'})}),"\n",(0,d.jsx)(e.h2,{id:"apialerts",children:(0,d.jsx)(e.code,{children:"/api/alerts"})}),"\n",(0,d.jsx)(e.h3,{id:"descri\xe7\xe3o-1",children:"Descri\xe7\xe3o"}),"\n",(0,d.jsx)(e.p,{children:"Retorna alertas ativos de tr\xe2nsito (obras, acidentes, bloqueios, etc.)."}),"\n",(0,d.jsx)(e.h3,{id:"fonte-dos-dados-1",children:"Fonte dos dados"}),"\n",(0,d.jsx)(e.p,{children:"Camada ArcGIS pr\xf3pria com dados de alertas de mobilidade originados da plataforma waze."}),"\n",(0,d.jsx)(e.h3,{id:"cache-1",children:"Cache"}),"\n",(0,d.jsx)(e.p,{children:"2 minutos"}),"\n",(0,d.jsx)(e.h3,{id:"estrutura-de-resposta-1",children:"Estrutura de Resposta"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'[\n  {\n\t\t"attributes": {\n\t\t\t"OBJECTID": 32152,\n\t\t\t"tx_uuid": "5d08ef61-ad05-4b9a-a263-0cd81bccc63b",\n\t\t\t"tx_rua": "R. Ven\xe2ncio Flores",\n\t\t\t"tx_tipo_via": "Rua",\n\t\t\t"tx_tipo_alerta": "Perigo",\n\t\t\t"tx_subtipo_alerta": "Buraco",\n\t\t\t"tx_informe_municipal": false,\n\t\t\t"dt_data_hora": 1747082645026,\n\t\t\t"dt_entrada": 1746903867416,\n\t\t\t"dt_saida": null,\n\t\t\t"db_lat": -22.885837,\n\t\t\t"db_long": -42.988003,\n\t\t\t"li_avaliacao_informe": 0,\n\t\t\t"li_confianca": 5,\n\t\t\t"li_confiabilidade": 10,\n\t\t\t"li_direcao_graus": 35\n\t\t},\n\t\t"geometry": {\n\t\t\t"x": -42.988003,\n\t\t\t"y": -22.885837\n\t\t}\n\t},\n]\n'})}),"\n",(0,d.jsx)(e.h2,{id:"apitraffic",children:(0,d.jsx)(e.code,{children:"/api/traffic"})}),"\n",(0,d.jsx)(e.h3,{id:"descri\xe7\xe3o-2",children:"Descri\xe7\xe3o"}),"\n",(0,d.jsx)(e.p,{children:"Retorna informa\xe7\xf5es em tempo real sobre o fluxo do tr\xe2nsito em diferentes trechos da cidade."}),"\n",(0,d.jsx)(e.h3,{id:"fonte-dos-dados-2",children:"Fonte dos dados"}),"\n",(0,d.jsx)(e.p,{children:"Camada ArcGIS com dados de mobilidade e intensidade de tr\xe1fego."}),"\n",(0,d.jsx)(e.h3,{id:"cache-2",children:"Cache"}),"\n",(0,d.jsx)(e.p,{children:"5 minutos"}),"\n",(0,d.jsx)(e.h3,{id:"estrutura-de-resposta-2",children:"Estrutura de Resposta"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'[\n  {\n\t\t"attributes": {\n\t\t\t"OBJECTID": 919298,\n\t\t\t"tx_uuid": "681096346",\n\t\t\t"tx_pais": "BR",\n\t\t\t"tx_cidade": "Niter\xf3i",\n\t\t\t"tx_tipo_via": "Rua principal",\n\t\t\t"tx_rua": "Av. Prof. Jo\xe3o Brasil",\n\t\t\t"li_comprimento": 568,\n\t\t\t"tx_final": "R. Capit\xe3o Dalvo Rabello Sampaio",\n\t\t\t"db_velocidade_kmh": 15.02,\n\t\t\t"db_velocidade": 4.1722222222222225,\n\t\t\t"li_atraso": 84,\n\t\t\t"li_nivel": 3,\n\t\t\t"li_id": 681096346,\n\t\t\t"dt_data_hora": 1747082645038,\n\t\t\t"Shape__Length": 0.005273132679789844\n\t\t},\n\t\t"geometry": {\n\t\t\t"paths": [\n\t\t\t\t[\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101642,\n\t\t\t\t\t\t-22.8808650006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101524,\n\t\t\t\t\t\t-22.8808460006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101462,\n\t\t\t\t\t\t-22.8808250006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101421,\n\t\t\t\t\t\t-22.8807940006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101359,\n\t\t\t\t\t\t-22.8806920006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.10132,\n\t\t\t\t\t\t-22.8805700006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.101245,\n\t\t\t\t\t\t-22.8803350006766\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.100944,\n\t\t\t\t\t\t-22.8794070006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.100776,\n\t\t\t\t\t\t-22.8789320006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.100729,\n\t\t\t\t\t\t-22.8788220006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.100621,\n\t\t\t\t\t\t-22.8786370006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.10048,\n\t\t\t\t\t\t-22.8784540006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.100348,\n\t\t\t\t\t\t-22.8783190006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.099763,\n\t\t\t\t\t\t-22.8778450006765\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t-43.098533,\n\t\t\t\t\t\t-22.8768910006765\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t]\n\t\t}\n\t},\n]\n'})})]})}function p(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,d.jsx)(e,{...t,children:(0,d.jsx)(c,{...t})}):c(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>a,x:()=>o});var s=n(6540);const d={},i=s.createContext(d);function a(t){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(d):t.components||d:a(t.components),s.createElement(i.Provider,{value:e},t.children)}}}]);