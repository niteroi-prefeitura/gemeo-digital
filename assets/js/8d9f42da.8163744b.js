"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6421],{1674:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"backend/fluxo-da-aplicacao","title":"Fluxo da Aplica\xe7\xe3o","description":"Esta p\xe1gina documenta o fluxo de dados da aplica\xe7\xe3o de g\xeameo digital, desde as fontes externas at\xe9 a resposta ao front-end, detalhando os tr\xeas endpoints principais: /api/bus, /api/alerts e /api/traffic.","source":"@site/docs/backend/fluxo-da-aplicacao.md","sourceDirName":"backend","slug":"/backend/fluxo-da-aplicacao","permalink":"/gemeo-digital/docs/backend/fluxo-da-aplicacao","draft":false,"unlisted":false,"editUrl":"https://github.com/niteroi-prefeitura/gemeo-digital/tree/master/apps/docs/docs/backend/fluxo-da-aplicacao.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"fluxo-da-aplicacao","title":"Fluxo da Aplica\xe7\xe3o","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Endpoints e Estrutura de Resposta","permalink":"/gemeo-digital/docs/backend/endpoints"},"next":{"title":"framework","permalink":"/gemeo-digital/docs/backend/framework"}}');var n=o(4848),s=o(8453);const r={id:"fluxo-da-aplicacao",title:"Fluxo da Aplica\xe7\xe3o",sidebar_position:4},d="Fluxo da Aplica\xe7\xe3o de G\xeameo Digital",c={},t=[{value:"\ud83d\udccc Vis\xe3o Geral",id:"-vis\xe3o-geral",level:2},{value:"\ud83d\udd01 Fluxo Geral de Dados",id:"-fluxo-geral-de-dados",level:2},{value:"\ud83d\udcca Diagrama de Fluxo",id:"-diagrama-de-fluxo",level:2}];function l(e){const a={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"fluxo-da-aplica\xe7\xe3o-de-g\xeameo-digital",children:"Fluxo da Aplica\xe7\xe3o de G\xeameo Digital"})}),"\n",(0,n.jsxs)(a.p,{children:["Esta p\xe1gina documenta o fluxo de dados da aplica\xe7\xe3o de g\xeameo digital, desde as fontes externas at\xe9 a resposta ao front-end, detalhando os tr\xeas endpoints principais: ",(0,n.jsx)(a.code,{children:"/api/bus"}),", ",(0,n.jsx)(a.code,{children:"/api/alerts"})," e ",(0,n.jsx)(a.code,{children:"/api/traffic"}),"."]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"-vis\xe3o-geral",children:"\ud83d\udccc Vis\xe3o Geral"}),"\n",(0,n.jsx)(a.p,{children:"A aplica\xe7\xe3o \xe9 composta por:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Um front-end que renderiza um mapa interativo com ArcGIS."}),"\n",(0,n.jsx)(a.li,{children:"Um backend que serve informa\xe7\xf5es geogr\xe1ficas e contextuais simplificadas por meio de uma API REST."}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"O foco do backend \xe9 sintetizar e padronizar os dados vindos de fontes diversas (APIs externas e camadas ArcGIS), aplicar cache para reduzir carga e lat\xeancia, e registrar erros com Winston."}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"-fluxo-geral-de-dados",children:"\ud83d\udd01 Fluxo Geral de Dados"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"O front-end realiza uma requisi\xe7\xe3o para um dos tr\xeas endpoints REST dispon\xedveis."}),"\n",(0,n.jsx)(a.li,{children:"O backend verifica se h\xe1 um cache v\xe1lido para aquela requisi\xe7\xe3o."}),"\n",(0,n.jsx)(a.li,{children:"Se o cache for v\xe1lido, o backend responde diretamente com os dados em cache."}),"\n",(0,n.jsxs)(a.li,{children:["Caso contr\xe1rio, ele consulta:","\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["Uma ",(0,n.jsx)(a.strong,{children:"API externa"})," no caso de ",(0,n.jsx)(a.code,{children:"/api/bus"})]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:"Camadas ArcGIS pr\xf3prias"})," no caso de ",(0,n.jsx)(a.code,{children:"/api/alerts"})," e ",(0,n.jsx)(a.code,{children:"/api/traffic"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["Os dados brutos s\xe3o ent\xe3o transformados:","\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Informa\xe7\xf5es irrelevantes s\xe3o descartadas"}),"\n",(0,n.jsx)(a.li,{children:"A estrutura do objeto \xe9 simplificada conforme o esperado pelo front-end"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(a.li,{children:"A resposta JSON \xe9 enviada ao front."}),"\n",(0,n.jsxs)(a.li,{children:["Qualquer erro encontrado \xe9 capturado por um middleware e registrado com ",(0,n.jsx)(a.strong,{children:"Winston"})," em arquivo de log."]}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"-diagrama-de-fluxo",children:"\ud83d\udcca Diagrama de Fluxo"}),"\n",(0,n.jsx)(a.mermaid,{value:"graph TD\n     FE[Front-end Mapa ArcGIS] --\x3e|Requisi\xe7\xe3o REST| BE[Backend Express.js]\n    BE --\x3e|Verifica Cache| Cache[Cache Local]\n    Cache --\x3e|V\xe1lido| Resp1[Resposta JSON Simplificada]\n    Cache --\x3e|Expirado| Origem{Fonte de Dados}\n\n    Origem --\x3e|/api/bus| API[API Externa \xd4nibus]\n    Origem --\x3e|/api/alerts ou /api/traffic| ArcGIS[Camadas ArcGIS]\n\n    API --\x3e Transform[Transforma\xe7\xe3o dos Dados]\n    ArcGIS --\x3e Transform\n\n    Transform --\x3e AtualizaCache[Atualiza Cache]\n    AtualizaCache --\x3e Resp2[Resposta JSON Simplificada]\n\n    BE --\x3e|Erros| Winston[Logs com Winston]"})]})}function p(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,a,o)=>{o.d(a,{R:()=>r,x:()=>d});var i=o(6540);const n={},s=i.createContext(n);function r(e){const a=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(s.Provider,{value:a},e.children)}}}]);